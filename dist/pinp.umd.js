!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("draggabilly")):"function"==typeof define&&define.amd?define(["draggabilly"],n):t.pinp=n(t.draggabilly)}(this,function(t){function n(){}t=t&&t.hasOwnProperty("default")?t.default:t;var e=function(e,i){void 0===i&&(i={});var o=i.container;void 0===o&&(o=document.documentElement);var r=i.grid;void 0===r&&(r=[1,1]);var d=i.onMove;if(void 0===d&&(d=n),!e)throw new TypeError("Item constructor expects HTMLElement, "+typeof e+" given");this.grid=r,this.onMove=d.bind(this),this.element=e,this.element.style.position="absolute",this.container=o,this.dragInstance=new t(e,{grid:r,containment:o}),this.dragInstance.on("dragEnd",this.onMove)},i={box:{configurable:!0},index:{configurable:!0}};return e.prototype.destroy=function(){this.dragInstance.destroy()},e.prototype.collide=function(t){return this.collideOnXAxis(t)&&this.collideOnYAxis(t)},e.prototype.collideOnYAxis=function(t){if(t)return t!==this&&this.box.xmax>t.box.xmin&&this.box.xmin<t.box.xmax},e.prototype.collideOnXAxis=function(t){if(t)return t!==this&&this.box.ymax>t.box.ymin&&this.box.ymin<t.box.ymax},e.prototype.move=function(t,n){this.isDragged||this.dragInstance.setPosition(t,n)},i.box.get=function(){var t=this.element.getBoundingClientRect(),n=t.width,e=t.height,i=this.dragInstance.position.x,o=this.dragInstance.position.y;return{x:i,y:o,width:n,height:e,xmin:i,ymin:o,xmax:i+n,ymax:o+e,center:{x:i+n/2,y:o+e/2}}},i.index.get=function(){return this._index},i.index.set=function(t){this._index=t,this.element.innerHTML="#"+t},e.prototype.write=function(t,n){void 0===n&&(n=!1),this._text=n?this._text+" "+t:t,this.element.innerHTML=this._text},Object.defineProperties(e.prototype,i),function(t){void 0===t&&(t={});var n=t.grid;void 0===n&&(n=[50,50]);var i=t.container;void 0===i&&(i=".pinp-container");var o,r=t.itemSelector;void 0===r&&(r=".pinp-item"),o=i;for(var d=(i=("object"==typeof window.HTMLElement?o instanceof window.HTMLElement:o&&"object"==typeof o&&null!==o&&1===o.nodeType&&"string"==typeof o.nodeName)?i:document.querySelector(i)).querySelectorAll(r),a=[],s=0;s<d.length;s++)x(d[s]);return{add:x,update:c};function x(t){var o=new e(t,{container:i,onMove:c,grid:n});a.push(o)}function c(){window.requestAnimationFrame(function(){!function(t,n){void 0===n&&(n=!1);for(var e=t.sort(function(t,n){return t.box.xmax-n.box.xmax}),i=0;i<e.length;i++){var o=e[i],r=h(e.slice(0,i).filter(o.collideOnXAxis.bind(o)));e.some(o.collide.bind(o))?(o.index=i,o.move(n?r.xmax:r.xmax||o.box.xmin,o.box.ymin)):o.index=""}}(a),function(t){i.style.width=h(t).width+"px"}(a)})}function h(t){var n=0,e=0,i=0,o=0;return t.forEach(function(t){var r=t.box;n=Math.min(n,r.x),e=Math.min(e,r.y),i=Math.max(i,r.x+r.width),o=Math.max(o,r.y+r.height)}),{x:n,y:e,width:i,height:o,xmin:n,xmax:n+i,ymin:e,ymax:e+o}}}});
//# sourceMappingURL=pinp.umd.js.map
